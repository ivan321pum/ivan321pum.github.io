"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[119],{9618:function(e,r,i){var u,d,s,_,f,m,y,b,A,w;i.r(r),(u=function(){this.init()}).prototype={init:function(){var e=this||d;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var r=this||d;if(e=parseFloat(e),r.ctx||w(),void 0!==e&&e>=0&&e<=1){if(r._volume=e,r._muted)return r;r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e,d.ctx.currentTime);for(var i=0;i<r._howls.length;i++)if(!r._howls[i]._webAudio)for(var u=r._howls[i]._getSoundIds(),s=0;s<u.length;s++){var _=r._howls[i]._soundById(u[s]);_&&_._node&&(_._node.volume=_._volume*e)}return r}return r._volume},mute:function(e){var r=this||d;r.ctx||w(),r._muted=e,r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e?0:r._volume,d.ctx.currentTime);for(var i=0;i<r._howls.length;i++)if(!r._howls[i]._webAudio)for(var u=r._howls[i]._getSoundIds(),s=0;s<u.length;s++){var _=r._howls[i]._soundById(u[s]);_&&_._node&&(_._node.muted=!!e||_._muted)}return r},stop:function(){for(var e=this||d,r=0;r<e._howls.length;r++)e._howls[r].stop();return e},unload:function(){for(var e=this||d,r=e._howls.length-1;r>=0;r--)e._howls[r].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,w()),e},codecs:function(e){return(this||d)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||d;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio){if("undefined"!=typeof Audio)try{var r=new Audio;void 0===r.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(r){e.noAudio=!0}else e.noAudio=!0}try{var r=new Audio;r.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||d,r=null;try{r="undefined"!=typeof Audio?new Audio:null}catch(r){return e}if(!r||"function"!=typeof r.canPlayType)return e;var i=r.canPlayType("audio/mpeg;").replace(/^no$/,""),u=e._navigator?e._navigator.userAgent:"",s=u.match(/OPR\/([0-6].)/g),_=s&&33>parseInt(s[0].split("/")[1],10),f=-1!==u.indexOf("Safari")&&-1===u.indexOf("Chrome"),m=u.match(/Version\/(.*?) /),y=f&&m&&15>parseInt(m[1],10);return e._codecs={mp3:!(_||!i&&!r.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(r.canPlayType('audio/wav; codecs="1"')||r.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!r.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(r.canPlayType("audio/x-m4b;")||r.canPlayType("audio/m4b;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(y||!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(y||!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(r.canPlayType("audio/x-flac;")||r.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||d;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var o=function(r){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var i=new Audio;i._unlocked=!0,e._releaseHtml5Audio(i)}catch(r){e.noAudio=!0;break}for(var u=0;u<e._howls.length;u++)if(!e._howls[u]._webAudio)for(var d=e._howls[u]._getSoundIds(),s=0;s<d.length;s++){var _=e._howls[u]._soundById(d[s]);_&&_._node&&!_._node._unlocked&&(_._node._unlocked=!0,_._node.load())}e._autoResume();var f=e.ctx.createBufferSource();f.buffer=e._scratchBuffer,f.connect(e.ctx.destination),void 0===f.start?f.noteOn(0):f.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),f.onended=function(){f.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0),document.removeEventListener("click",o,!0),document.removeEventListener("keydown",o,!0);for(var r=0;r<e._howls.length;r++)e._howls[r]._emit("unlock")}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),document.addEventListener("click",o,!0),document.addEventListener("keydown",o,!0),e}},_obtainHtml5Audio:function(){var e=this||d;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var r=(new Audio).play();return r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)&&r.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var r=this||d;return e._unlocked&&r._html5AudioPool.push(e),r},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&d.usingWebAudio){for(var r=0;r<e._howls.length;r++)if(e._howls[r]._webAudio){for(var i=0;i<e._howls[r]._sounds.length;i++)if(!e._howls[r]._sounds[i]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var n=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(n,n)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&d.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var r=0;r<e._howls.length;r++)e._howls[r]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}},d=new u,(s=function(e){if(!e.src||0===e.src.length)return void console.error("An array of source files must be passed with any new Howl.");this.init(e)}).prototype={init:function(e){var r=this;return d.ctx||w(),r._autoplay=e.autoplay||!1,r._format="string"!=typeof e.format?e.format:[e.format],r._html5=e.html5||!1,r._muted=e.mute||!1,r._loop=e.loop||!1,r._pool=e.pool||5,r._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,r._rate=e.rate||1,r._sprite=e.sprite||{},r._src="string"!=typeof e.src?e.src:[e.src],r._volume=void 0!==e.volume?e.volume:1,r._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},r._duration=0,r._state="unloaded",r._sounds=[],r._endTimers={},r._queue=[],r._playLock=!1,r._onend=e.onend?[{fn:e.onend}]:[],r._onfade=e.onfade?[{fn:e.onfade}]:[],r._onload=e.onload?[{fn:e.onload}]:[],r._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],r._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],r._onpause=e.onpause?[{fn:e.onpause}]:[],r._onplay=e.onplay?[{fn:e.onplay}]:[],r._onstop=e.onstop?[{fn:e.onstop}]:[],r._onmute=e.onmute?[{fn:e.onmute}]:[],r._onvolume=e.onvolume?[{fn:e.onvolume}]:[],r._onrate=e.onrate?[{fn:e.onrate}]:[],r._onseek=e.onseek?[{fn:e.onseek}]:[],r._onunlock=e.onunlock?[{fn:e.onunlock}]:[],r._onresume=[],r._webAudio=d.usingWebAudio&&!r._html5,void 0!==d.ctx&&d.ctx&&d.autoUnlock&&d._unlockAudio(),d._howls.push(r),r._autoplay&&r._queue.push({event:"play",action:function(){r.play()}}),r._preload&&"none"!==r._preload&&r.load(),r},load:function(){var e,r,i=null;if(d.noAudio)return void this._emit("loaderror",null,"No audio support.");"string"==typeof this._src&&(this._src=[this._src]);for(var u=0;u<this._src.length;u++){if(this._format&&this._format[u])e=this._format[u];else{if("string"!=typeof(r=this._src[u])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(e=/^data:audio\/([^;,]+);/i.exec(r))||(e=/\.([^.]+)$/.exec(r.split("?",1)[0])),e&&(e=e[1].toLowerCase())}if(e||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),e&&d.codecs(e)){i=this._src[u];break}}return i?(this._src=i,this._state="loading","https:"===window.location.protocol&&"http:"===i.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new _(this),this._webAudio&&m(this),this):void this._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,r){var i=this,u=null;if("number"==typeof e)u=e,e=null;else{if("string"==typeof e&&"loaded"===i._state&&!i._sprite[e])return null;if(void 0===e&&(e="__default",!i._playLock)){for(var s=0,_=0;_<i._sounds.length;_++)i._sounds[_]._paused&&!i._sounds[_]._ended&&(s++,u=i._sounds[_]._id);1===s?e=null:u=null}}var f=u?i._soundById(u):i._inactiveSound();if(!f)return null;if(u&&!e&&(e=f._sprite||"__default"),"loaded"!==i._state){f._sprite=e,f._ended=!1;var m=f._id;return i._queue.push({event:"play",action:function(){i.play(m)}}),m}if(u&&!f._paused)return r||i._loadQueue("play"),f._id;i._webAudio&&d._autoResume();var y=Math.max(0,f._seek>0?f._seek:i._sprite[e][0]/1e3),b=Math.max(0,(i._sprite[e][0]+i._sprite[e][1])/1e3-y),A=1e3*b/Math.abs(f._rate),w=i._sprite[e][0]/1e3,T=(i._sprite[e][0]+i._sprite[e][1])/1e3;f._sprite=e,f._ended=!1;var p=function(){f._paused=!1,f._seek=y,f._start=w,f._stop=T,f._loop=!(!f._loop&&!i._sprite[e][2])};if(y>=T)return void i._ended(f);var x=f._node;if(i._webAudio){var v=function(){i._playLock=!1,p(),i._refreshBuffer(f);var e=f._muted||i._muted?0:f._volume;x.gain.setValueAtTime(e,d.ctx.currentTime),f._playStart=d.ctx.currentTime,void 0===x.bufferSource.start?f._loop?x.bufferSource.noteGrainOn(0,y,86400):x.bufferSource.noteGrainOn(0,y,b):f._loop?x.bufferSource.start(0,y,86400):x.bufferSource.start(0,y,b),A!==1/0&&(i._endTimers[f._id]=setTimeout(i._ended.bind(i,f),A)),r||setTimeout(function(){i._emit("play",f._id),i._loadQueue()},0)};"running"===d.state&&"interrupted"!==d.ctx.state?v():(i._playLock=!0,i.once("resume",v),i._clearTimer(f._id))}else{var h=function(){x.currentTime=y,x.muted=f._muted||i._muted||d._muted||x.muted,x.volume=f._volume*d.volume(),x.playbackRate=f._rate;try{var u=x.play();if(u&&"undefined"!=typeof Promise&&(u instanceof Promise||"function"==typeof u.then)?(i._playLock=!0,p(),u.then(function(){i._playLock=!1,x._unlocked=!0,r?i._loadQueue():i._emit("play",f._id)}).catch(function(){i._playLock=!1,i._emit("playerror",f._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),f._ended=!0,f._paused=!0})):r||(i._playLock=!1,p(),i._emit("play",f._id)),x.playbackRate=f._rate,x.paused)return void i._emit("playerror",f._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||f._loop?i._endTimers[f._id]=setTimeout(i._ended.bind(i,f),A):(i._endTimers[f._id]=function(){i._ended(f),x.removeEventListener("ended",i._endTimers[f._id],!1)},x.addEventListener("ended",i._endTimers[f._id],!1))}catch(e){i._emit("playerror",f._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===x.src&&(x.src=i._src,x.load());var k=window&&window.ejecta||!x.readyState&&d._navigator.isCocoonJS;if(x.readyState>=3||k)h();else{i._playLock=!0,i._state="loading";var g=function(){i._state="loaded",h(),x.removeEventListener(d._canPlayEvent,g,!1)};x.addEventListener(d._canPlayEvent,g,!1),i._clearTimer(f._id)}}return f._id},pause:function(e){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"pause",action:function(){r.pause(e)}}),r;for(var i=r._getSoundIds(e),u=0;u<i.length;u++){r._clearTimer(i[u]);var d=r._soundById(i[u]);if(d&&!d._paused&&(d._seek=r.seek(i[u]),d._rateSeek=0,d._paused=!0,r._stopFade(i[u]),d._node)){if(r._webAudio){if(!d._node.bufferSource)continue;void 0===d._node.bufferSource.stop?d._node.bufferSource.noteOff(0):d._node.bufferSource.stop(0),r._cleanBuffer(d._node)}else isNaN(d._node.duration)&&d._node.duration!==1/0||d._node.pause()}arguments[1]||r._emit("pause",d?d._id:null)}return r},stop:function(e,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(e)}}),i;for(var u=i._getSoundIds(e),d=0;d<u.length;d++){i._clearTimer(u[d]);var s=i._soundById(u[d]);s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,i._stopFade(u[d]),s._node&&(i._webAudio?s._node.bufferSource&&(void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),i._cleanBuffer(s._node)):isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause(),s._node.duration===1/0&&i._clearSound(s._node))),r||i._emit("stop",s._id))}return i},mute:function(e,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(e,r)}}),i;if(void 0===r){if("boolean"!=typeof e)return i._muted;i._muted=e}for(var u=i._getSoundIds(r),s=0;s<u.length;s++){var _=i._soundById(u[s]);_&&(_._muted=e,_._interval&&i._stopFade(_._id),i._webAudio&&_._node?_._node.gain.setValueAtTime(e?0:_._volume,d.ctx.currentTime):_._node&&(_._node.muted=!!d._muted||e),i._emit("mute",_._id))}return i},volume:function(){var e,r,i,u=this,s=arguments;if(0===s.length)return u._volume;if(1===s.length||2===s.length&&void 0===s[1]?u._getSoundIds().indexOf(s[0])>=0?i=parseInt(s[0],10):r=parseFloat(s[0]):s.length>=2&&(r=parseFloat(s[0]),i=parseInt(s[1],10)),!(void 0!==r&&r>=0&&r<=1))return(e=i?u._soundById(i):u._sounds[0])?e._volume:0;if("loaded"!==u._state||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,s)}}),u;void 0===i&&(u._volume=r),i=u._getSoundIds(i);for(var _=0;_<i.length;_++)(e=u._soundById(i[_]))&&(e._volume=r,s[2]||u._stopFade(i[_]),u._webAudio&&e._node&&!e._muted?e._node.gain.setValueAtTime(r,d.ctx.currentTime):e._node&&!e._muted&&(e._node.volume=r*d.volume()),u._emit("volume",e._id));return u},fade:function(e,r,i,u){var s=this;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"fade",action:function(){s.fade(e,r,i,u)}}),s;e=Math.min(Math.max(0,parseFloat(e)),1),r=Math.min(Math.max(0,parseFloat(r)),1),i=parseFloat(i),s.volume(e,u);for(var _=s._getSoundIds(u),f=0;f<_.length;f++){var m=s._soundById(_[f]);if(m){if(u||s._stopFade(_[f]),s._webAudio&&!m._muted){var y=d.ctx.currentTime,b=y+i/1e3;m._volume=e,m._node.gain.setValueAtTime(e,y),m._node.gain.linearRampToValueAtTime(r,b)}s._startFadeInterval(m,e,r,i,_[f],void 0===u)}}return s},_startFadeInterval:function(e,r,i,u,d,s){var _=this,f=r,m=i-r,y=Math.abs(m/.01),b=Date.now();e._fadeTo=i,e._interval=setInterval(function(){var d=(Date.now()-b)/u;b=Date.now(),f+=m*d,f=Math.round(100*f)/100,f=m<0?Math.max(i,f):Math.min(i,f),_._webAudio?e._volume=f:_.volume(f,e._id,!0),s&&(_._volume=f),(i<r&&f<=i||i>r&&f>=i)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,_.volume(i,e._id),_._emit("fade",e._id))},Math.max(4,y>0?u/y:u))},_stopFade:function(e){var r=this._soundById(e);return r&&r._interval&&(this._webAudio&&r._node.gain.cancelScheduledValues(d.ctx.currentTime),clearInterval(r._interval),r._interval=null,this.volume(r._fadeTo,e),r._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,r,i,u=arguments;if(0===u.length)return this._loop;if(1===u.length){if("boolean"!=typeof u[0])return!!(i=this._soundById(parseInt(u[0],10)))&&i._loop;e=u[0],this._loop=e}else 2===u.length&&(e=u[0],r=parseInt(u[1],10));for(var d=this._getSoundIds(r),s=0;s<d.length;s++)(i=this._soundById(d[s]))&&(i._loop=e,this._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=e,e&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop,this.playing(d[s])&&(this.pause(d[s],!0),this.play(d[s],!0)))));return this},rate:function(){var e,r,i,u=this,s=arguments;if(0===s.length?i=u._sounds[0]._id:1===s.length?u._getSoundIds().indexOf(s[0])>=0?i=parseInt(s[0],10):r=parseFloat(s[0]):2===s.length&&(r=parseFloat(s[0]),i=parseInt(s[1],10)),"number"!=typeof r)return(e=u._soundById(i))?e._rate:u._rate;if("loaded"!==u._state||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,s)}}),u;void 0===i&&(u._rate=r),i=u._getSoundIds(i);for(var _=0;_<i.length;_++)if(e=u._soundById(i[_])){u.playing(i[_])&&(e._rateSeek=u.seek(i[_]),e._playStart=u._webAudio?d.ctx.currentTime:e._playStart),e._rate=r,u._webAudio&&e._node&&e._node.bufferSource?e._node.bufferSource.playbackRate.setValueAtTime(r,d.ctx.currentTime):e._node&&(e._node.playbackRate=r);var f=u.seek(i[_]),m=1e3*((u._sprite[e._sprite][0]+u._sprite[e._sprite][1])/1e3-f)/Math.abs(e._rate);!u._endTimers[i[_]]&&e._paused||(u._clearTimer(i[_]),u._endTimers[i[_]]=setTimeout(u._ended.bind(u,e),m)),u._emit("rate",e._id)}return u},seek:function(){var e,r,i=this,u=arguments;if(0===u.length?i._sounds.length&&(r=i._sounds[0]._id):1===u.length?i._getSoundIds().indexOf(u[0])>=0?r=parseInt(u[0],10):i._sounds.length&&(r=i._sounds[0]._id,e=parseFloat(u[0])):2===u.length&&(e=parseFloat(u[0]),r=parseInt(u[1],10)),void 0===r)return 0;if("number"==typeof e&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,u)}}),i;var s=i._soundById(r);if(s){if(!("number"==typeof e&&e>=0)){if(i._webAudio){var _=i.playing(r)?d.ctx.currentTime-s._playStart:0,f=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(f+_*Math.abs(s._rate))}return s._node.currentTime}var m=i.playing(r);m&&i.pause(r,!0),s._seek=e,s._ended=!1,i._clearTimer(r),i._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var l=function(){m&&i.play(r,!0),i._emit("seek",r)};if(m&&!i._webAudio){var c=function(){i._playLock?setTimeout(c,0):l()};setTimeout(c,0)}else l()}return i},playing:function(e){if("number"==typeof e){var r=this._soundById(e);return!!r&&!r._paused}for(var i=0;i<this._sounds.length;i++)if(!this._sounds[i]._paused)return!0;return!1},duration:function(e){var r=this._duration,i=this._soundById(e);return i&&(r=this._sprite[i._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var e=this,r=e._sounds,i=0;i<r.length;i++)r[i]._paused||e.stop(r[i]._id),e._webAudio||(e._clearSound(r[i]._node),r[i]._node.removeEventListener("error",r[i]._errorFn,!1),r[i]._node.removeEventListener(d._canPlayEvent,r[i]._loadFn,!1),r[i]._node.removeEventListener("ended",r[i]._endFn,!1),d._releaseHtml5Audio(r[i]._node)),delete r[i]._node,e._clearTimer(r[i]._id);var u=d._howls.indexOf(e);u>=0&&d._howls.splice(u,1);var s=!0;for(i=0;i<d._howls.length;i++)if(d._howls[i]._src===e._src||e._src.indexOf(d._howls[i]._src)>=0){s=!1;break}return f&&s&&delete f[e._src],d.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,r,i,u){var d=this["_on"+e];return"function"==typeof r&&d.push(u?{id:i,fn:r,once:u}:{id:i,fn:r}),this},off:function(e,r,i){var u=this["_on"+e],d=0;if("number"==typeof r&&(i=r,r=null),r||i)for(d=0;d<u.length;d++){var s=i===u[d].id;if(r===u[d].fn&&s||!r&&s){u.splice(d,1);break}}else if(e)this["_on"+e]=[];else{var _=Object.keys(this);for(d=0;d<_.length;d++)0===_[d].indexOf("_on")&&Array.isArray(this[_[d]])&&(this[_[d]]=[])}return this},once:function(e,r,i){return this.on(e,r,i,1),this},_emit:function(e,r,i){for(var u=this["_on"+e],d=u.length-1;d>=0;d--)u[d].id&&u[d].id!==r&&"load"!==e||(setTimeout((function(e){e.call(this,r,i)}).bind(this,u[d].fn),0),u[d].once&&this.off(e,u[d].fn,u[d].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var r=this._queue[0];r.event===e&&(this._queue.shift(),this._loadQueue()),e||r.action()}return this},_ended:function(e){var r=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var i=!(!e._loop&&!this._sprite[r][2]);if(this._emit("end",e._id),!this._webAudio&&i&&this.stop(e._id,!0).play(e._id),this._webAudio&&i){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=d.ctx.currentTime;var u=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),u)}return this._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),d._autoSuspend()),this._webAudio||i||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var r=this._soundById(e);r&&r._node&&r._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var r=0;r<this._sounds.length;r++)if(e===this._sounds[r]._id)return this._sounds[r];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new _(this)},_drain:function(){var e=this._pool,r=0,i=0;if(!(this._sounds.length<e)){for(i=0;i<this._sounds.length;i++)this._sounds[i]._ended&&r++;for(i=this._sounds.length-1;i>=0;i--){if(r<=e)return;this._sounds[i]._ended&&(this._webAudio&&this._sounds[i]._node&&this._sounds[i]._node.disconnect(0),this._sounds.splice(i,1),r--)}}},_getSoundIds:function(e){if(void 0===e){for(var r=[],i=0;i<this._sounds.length;i++)r.push(this._sounds[i]._id);return r}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=d.ctx.createBufferSource(),e._node.bufferSource.buffer=f[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,d.ctx.currentTime),this},_cleanBuffer:function(e){var r=d._navigator&&d._navigator.vendor.indexOf("Apple")>=0;if(d._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),r))try{e.bufferSource.buffer=d._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(d._navigator&&d._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}},(_=function(e){this._parent=e,this.init()}).prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++d._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,r=d._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===d.ctx.createGain?d.ctx.createGainNode():d.ctx.createGain(),this._node.gain.setValueAtTime(r,d.ctx.currentTime),this._node.paused=!0,this._node.connect(d.masterGain)):d.noAudio||(this._node=d._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(d._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=e._src,this._node.preload=!0===e._preload?"auto":e._preload,this._node.volume=r*d.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++d._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(d._canPlayEvent,this._loadFn,!1)},_endListener:function(){var e=this._parent;e._duration===1/0&&(e._duration=Math.ceil(10*this._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}},f={},m=function(e){var r=e._src;if(f[r])return e._duration=f[r].duration,void A(e);if(/^data:[^;]+;base64,/.test(r)){for(var i=atob(r.split(",")[1]),u=new Uint8Array(i.length),d=0;d<i.length;++d)u[d]=i.charCodeAt(d);b(u.buffer,e)}else{var s=new XMLHttpRequest;s.open(e._xhr.method,r,!0),s.withCredentials=e._xhr.withCredentials,s.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(r){s.setRequestHeader(r,e._xhr.headers[r])}),s.onload=function(){var r=(s.status+"")[0];if("0"!==r&&"2"!==r&&"3"!==r)return void e._emit("loaderror",null,"Failed loading audio file with status: "+s.status+".");b(s.response,e)},s.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete f[r],e.load())},y(s)}},y=function(e){try{e.send()}catch(r){e.onerror()}},b=function(e,r){var t=function(){r._emit("loaderror",null,"Decoding audio data failed.")},a=function(e){e&&r._sounds.length>0?(f[r._src]=e,A(r,e)):t()};"undefined"!=typeof Promise&&1===d.ctx.decodeAudioData.length?d.ctx.decodeAudioData(e).then(a).catch(t):d.ctx.decodeAudioData(e,a,t)},A=function(e,r){r&&!e._duration&&(e._duration=r.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},w=function(){if(d.usingWebAudio){try{"undefined"!=typeof AudioContext?d.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?d.ctx=new webkitAudioContext:d.usingWebAudio=!1}catch(e){d.usingWebAudio=!1}d.ctx||(d.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(d._navigator&&d._navigator.platform),r=d._navigator&&d._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=r?parseInt(r[1],10):null;if(e&&i&&i<9){var u=/safari/.test(d._navigator&&d._navigator.userAgent.toLowerCase());d._navigator&&!u&&(d.usingWebAudio=!1)}d.usingWebAudio&&(d.masterGain=void 0===d.ctx.createGain?d.ctx.createGainNode():d.ctx.createGain(),d.masterGain.gain.setValueAtTime(d._muted?0:d._volume,d.ctx.currentTime),d.masterGain.connect(d.ctx.destination)),d._setup()}},"function"==typeof define&&define.amd&&define([],function(){return{Howler:d,Howl:s}}),"undefined"!=typeof exports&&(exports.Howler=d,exports.Howl=s),"undefined"!=typeof global?(global.HowlerGlobal=u,global.Howler=d,global.Howl=s,global.Sound=_):"undefined"!=typeof window&&(window.HowlerGlobal=u,window.Howler=d,window.Howl=s,window.Sound=_)}}]);